# Copyright (C) 2010-2016   Christopher C. Hulbert
#
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are met:
#
#    1. Redistributions of source code must retain the above copyright notice,
#       this list of conditions and the following disclaimer.
#
#    2. Redistributions in binary form must reproduce the above copyright
#       notice, this list of conditions and the following disclaimer in the
#       documentation and/or other materials provided with the distribution.
#
# THIS SOFTWARE IS PROVIDED BY CHRISTOPHER C. HULBERT ``AS IS'' AND ANY
# EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
# DISCLAIMED. IN NO EVENT SHALL CHRISTOPHER C. HULBERT OR CONTRIBUTORS BE
# LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
# CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
# SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
# CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
# ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
# POSSIBILITY OF SUCH DAMAGE.

AT_SETUP([Read 2D double-precision array])
AT_CHECK([cp $srcdir/results/read-var1.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var1],[0],[expout],[])
AT_CHECK([cp $srcdir/results/dump-var1.out expout
          $builddir/../tools/matdump -d $srcdir/datasets/matio_test_cases_uncompressed_be.mat var1],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D single-precision array])
AT_CHECK([cp $srcdir/results/read-var2.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var2],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 64-bit integer array])
AT_CHECK([cp $srcdir/results/read-var3.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var3],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 64-bit unsigned integer array])
AT_CHECK([cp $srcdir/results/read-var4.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var4],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 32-bit integer array])
AT_CHECK([cp $srcdir/results/read-var5.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var5],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 32-bit unsigned integer array])
AT_CHECK([cp $srcdir/results/read-var6.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var6],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 16-bit integer array])
AT_CHECK([cp $srcdir/results/read-var7.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var7],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 16-bit unsigned integer array])
AT_CHECK([cp $srcdir/results/read-var8.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var8],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 8-bit integer array])
AT_CHECK([cp $srcdir/results/read-var9.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var9],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 8-bit unsigned integer array])
AT_CHECK([cp $srcdir/results/read-var10.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var10],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D double-precision complex array])
AT_CHECK([cp $srcdir/results/read-var11.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var11],[0],[expout],[])
AT_CHECK([cp $srcdir/results/dump-var11.out expout
          $builddir/../tools/matdump -d $srcdir/datasets/matio_test_cases_uncompressed_be.mat var11],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D single-precision complex array])
AT_CHECK([cp $srcdir/results/read-var12.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var12],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 64-bit integer complex array])
AT_CHECK([cp $srcdir/results/read-var13.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var13],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 64-bit unsigned integer complex array])
AT_CHECK([cp $srcdir/results/read-var14.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var14],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 32-bit integer complex array])
AT_CHECK([cp $srcdir/results/read-var15.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var15],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 32-bit unsigned integer complex array])
AT_CHECK([cp $srcdir/results/read-var16.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var16],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 16-bit integer complex array])
AT_CHECK([cp $srcdir/results/read-var17.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var17],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 16-bit unsigned integer complex array])
AT_CHECK([cp $srcdir/results/read-var18.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var18],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 8-bit integer complex array])
AT_CHECK([cp $srcdir/results/read-var19.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var19],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D 8-bit unsigned integer complex array])
AT_CHECK([cp $srcdir/results/read-var20.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var20],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D logical array])
AT_CHECK([cp $srcdir/results/read-var90.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var90],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read double-precision sparse array])
AT_CHECK([cp $srcdir/results/read-var21.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var21],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read double-precision sparse complex array])
AT_CHECK([cp $srcdir/results/read-var22.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var22],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read empty array])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var23.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var23],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read 2D character array])
AT_CHECK([cp $srcdir/results/read-var24.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var24],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read empty structure array])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var25.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var25],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read empty structure array with fields])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var26.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var26],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with empty fields])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var27.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var27],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with double-precision fields])
AT_CHECK([cp $srcdir/results/read-var28.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var28],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with single-precision fields])
AT_CHECK([cp $srcdir/results/read-var29.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var29],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 64-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var30.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var30],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 64-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var31.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var31],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 32-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var32.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var32],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 32-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var33.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var33],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 16-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var34.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var34],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 16-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var35.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var35],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 8-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var36.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var36],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with 8-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var37.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var37],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex double-precision fields])
AT_CHECK([cp $srcdir/results/read-var38.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var38],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex single-precision fields])
AT_CHECK([cp $srcdir/results/read-var39.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var39],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 64-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var40.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var40],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 64-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var41.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var41],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 32-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var42.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var42],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 32-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var43.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var43],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 16-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var44.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var44],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 16-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var45.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var45],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 8-bit integer fields])
AT_CHECK([cp $srcdir/results/read-var46.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var46],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex 8-bit unsigned integer fields])
AT_CHECK([cp $srcdir/results/read-var47.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var47],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with logical fields])
AT_CHECK([cp $srcdir/results/read-var91.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var91],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with double-precision sparse fields])
AT_CHECK([cp $srcdir/results/read-var48.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var48],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with complex double-precision sparse fields])
AT_CHECK([cp $srcdir/results/read-var49.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var49],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read structure array with character fields])
AT_CHECK([cp $srcdir/results/read-var50.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var50],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read empty cell array])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var51.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var51],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with empty arrays])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var52.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var52],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with double-precision arrays])
AT_CHECK([cp $srcdir/results/read-var53.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var53],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with single-precision arrays])
AT_CHECK([cp $srcdir/results/read-var54.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var54],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 64-bit integer arrays])
AT_CHECK([cp $srcdir/results/read-var55.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var55],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 64-bit unsigned integer arrays])
AT_CHECK([cp $srcdir/results/read-var56.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var56],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 32-bit integer arrays])
AT_CHECK([cp $srcdir/results/read-var57.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var57],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 32-bit unsigned integer arrays])
AT_CHECK([cp $srcdir/results/read-var58.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var58],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 16-bit integer arrays])
AT_CHECK([cp $srcdir/results/read-var59.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var59],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 16-bit unsigned integer arrays])
AT_CHECK([cp $srcdir/results/read-var60.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var60],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 8-bit integer arrays])
AT_CHECK([cp $srcdir/results/read-var61.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var61],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with 8-bit unsigned integer arrays])
AT_CHECK([cp $srcdir/results/read-var62.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var62],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with logical arrays])
AT_CHECK([cp $srcdir/results/read-var92.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var92],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with double-precision sparse arrays])
AT_CHECK([cp $srcdir/results/read-var63.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var63],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with complex double-precision sparse arrays])
AT_CHECK([cp $srcdir/results/read-var64.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var64],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with character arrays])
AT_CHECK([cp $srcdir/results/read-var65.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var65],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with empty structure arrays])
AT_KEYWORDS([empty])
AT_CHECK([cp $srcdir/results/read-var66.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var66],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with structure arrays (numeric fields)])
AT_CHECK([cp $srcdir/results/read-var67.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var67],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array with structure arrays (sparse fields)])
AT_CHECK([cp $srcdir/results/read-var68.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var68],[0],[expout],[])
AT_CLEANUP

AT_SETUP([Read cell array structure arrays (character fields)])
AT_CHECK([cp $srcdir/results/read-var69.out expout
          $builddir/test_mat readvar $srcdir/datasets/matio_test_cases_uncompressed_be.mat var69],[0],[expout],[])
AT_CLEANUP
